(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7197:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(7294),r=n(2948),o=n(9008),s=n(1752),l=n(7054),i=n(5697),c=n.n(i),m=n(1678),u=n.n(m);const{publicRuntimeConfig:d}=(0,s.default)();function h(e){const{onSearchSubmit:t,geolocationAddress:n,onSearchChange:o}=e,[s,i]=(0,a.useState)([1,1386,33602]),[c,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(null);r.Z.setApiKey(d.GoogleMapsAPIKey);function g(e){s.includes(e)?i(s.filter((t=>t!==e))):i(s.concat([e]))}return a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(`submitted + ${h}`);const a=h||(n||null);a?r.Z.fromAddress(a).then((n=>{const{lat:a,lng:r}=n.results[0].geometry.location;t({newCoordinates:[a,r],newRadius:e.target.radius.value,newVideogames:s,newAfterDate:Math.floor(Date.now()/1e3),error:!1})}),(e=>{console.error(e),t({error:!0})})):t({error:!0})}},a.createElement("div",{className:u().searchbar},a.createElement("label",{htmlFor:"location"},"Location"),a.createElement(l.F2,{onLoad:e=>{m(e)},onPlaceChanged:()=>{null!==c&&p(c.getPlace().formatted_address)}},a.createElement("input",{type:"text",id:"location",placeholder:"Enter an address here",defaultValue:n,style:{border:"1px solid transparent",width:"100%",height:"32px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)"}})),a.createElement("div",{className:u().filters},a.createElement("div",{className:u().dropdowns},a.createElement("label",{htmlFor:"radius"},"Radius "),a.createElement("select",{id:"radius"},a.createElement("option",{default:!0,value:"10mi"},"10mi"),a.createElement("option",{value:"20mi"},"20mi"),a.createElement("option",{value:"30mi"},"30mi"),a.createElement("option",{value:"40mi"},"40mi"),a.createElement("option",{value:"50mi"},"50mi"))),a.createElement("div",{className:u().gameFilters},a.createElement("div",null,"Games: "),a.createElement("input",{name:"melee",type:"checkbox",checked:s.includes(1),onChange:()=>g(1)}),a.createElement("label",{htmlFor:"melee"},"Super Smash Bros. Melee"),a.createElement("input",{name:"ultimate",type:"checkbox",checked:s.includes(1386),onChange:()=>g(1386)}),a.createElement("label",{htmlFor:"ultimate"},"Super Smash Bros. Ultimate"),a.createElement("input",{name:"projectPlus",type:"checkbox",checked:s.includes(33602),onChange:()=>g(33602)}),a.createElement("label",{htmlFor:"projectPlus"},"Project +")),a.createElement("button",{type:"submit"},"Search!"))))}h.propTypes={onClick:c().func};var p=h,g=n(9349),v=n.n(g);var E=function(e){const{searchedCoordinates:t,tournamentCoordinates:n}=e,r={lat:n?n[0]:t[0],lng:n?n[1]:t[1]};return a.createElement("div",{className:v().mapContainer},a.createElement("div",{style:{width:"100%",height:"70vmin"}},a.createElement(l.b6,{mapContainerStyle:{height:"100%",width:"100%"},zoom:13,center:r},a.createElement(l.Jx,{onLoad:e=>{console.log("marker: ",e)},position:r}))))},f=n(3056),y=n(4654),_=n.n(y),S=n(3060),C=n.n(S),b=n(5005),T=n(6926),I=n.n(T);var A=function(e){return a.createElement("div",{className:I().eventWrapper},a.createElement("div",{className:I().eventDesc},a.createElement("h6",null,e.name),a.createElement("span",null,"Starts at: ",e.startTime),a.createElement("span",null,"Entrants: ",e.numEntrants)),a.createElement("img",{src:e.gameImage,className:I().eventImg}))};var N=function(e){return a.createElement("div",{className:C().listItemContainer,style:{backgroundImage:`url(${e.imageURL})`}},a.createElement("div",{className:C().overlay},a.createElement("div",{className:C().tournamentWrapper,onClick:()=>e.onTournamentSelected(e.id,e.venueAddress)},a.createElement("div",{className:C().itemIndex},a.createElement("h3",null,e.id+1,".")),a.createElement("div",{className:C().tournamentDescription},a.createElement("h4",null,e.name),a.createElement("p",null,e.venueName),a.createElement("p",null,e.venueAddress),a.createElement("p",null,e.startTime)),a.createElement("div",{className:C().smashGG},a.createElement(b.Z,{variant:"danger",href:e.tournament.url},"Smash.gg"),a.createElement("span",{style:{fontSize:"0.7rem",alignSelf:"center"}},"Registration ",e.tournament.isRegistrationOpen?"Open":"Closed"))),a.createElement("div",{className:C().eventListWrapper,style:{display:e.selectedTournamentID===e.id?"flex":"none"}},e.tournamentEvents.map(((t,n)=>a.createElement(A,{name:t.name,startTime:e.convertTime(1e3*t.startAt),numEntrants:t.numEntrants,gameImage:t.videogame.images[0].url}))))))},D=n(6149);var w=function(e){const{tournaments:t,convertTime:n,onTournamentSelected:r,selectedTournamentID:o}=e;return a.createElement(a.Fragment,null,a.createElement(D.Z,{className:_().listContainer},a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"0 auto",height:"1.5rem",width:"100%",color:"white"}},e.tournaments.length>0?"Click on a tournament to view all relevant events":"No tournaments found. Please modify your selection and try again."),a.createElement(D.Z.Item,null,t.map(((e,t)=>a.createElement(N,{tournament:e,id:t,key:t,name:e.name,url:e.url,imageURL:e.images[1].url,venueName:e.venueName,venueAddress:`${e.venueAddress.slice(0,e.venueAddress.indexOf(", ")+2)}${e.city}, ${e.addrState}`,startTime:n(1e3*e.startAt),isRegistrationOpen:e.isRegistrationOpen,tournamentEvents:e.events,convertTime:n,onTournamentSelected:r,selectedTournamentID:o}))))))},x=n(9073);function L(e){const t=new Date(e),n=t.toTimeString().split(" ").slice(2).join().match(/[A-Z]/g).join("");return`${t.toDateString()} ${t.toLocaleTimeString()} ${n}`}function k(e){const{variables:t,onTournamentSelected:n,selectedTournamentID:r}=e,{data:o,loading:s,error:l}=(0,f.a)(x.Q,{variables:t});if(s)return a.createElement("h2",null,"Loading Data...");if(l)return console.error(l),a.createElement("h2",null,"No Tournaments found. Please try another location.");const i=o.tournaments.nodes;return a.createElement(a.Fragment,null,a.createElement(w,{tournaments:i,convertTime:L,onTournamentSelected:n,selectedTournamentID:r}))}k.propTypes={tournamentList:c().object};var P=k,q=n(1600);const{publicRuntimeConfig:F}=(0,s.default)(),R=F.GoogleMapsAPIKey,G=["places"];r.Z.setApiKey(R);class Z extends a.Component{constructor(e){super(e),this.state={geolocationAddress:"",searchAddress:"",queryCoordinates:[0,0],queryRadius:"50mi",queryVideogames:[1,1386,33602],queryAfterDate:Math.floor(Date.now()/1e3),hasSearched:!1,error:!1,selectedTournamentID:null,selectedTournamentCoordinates:null}}handleSearchSubmit=e=>{e.error?this.setState({hasSearched:!0,error:e.error}):this.setState({queryCoordinates:e.newCoordinates,queryRadius:e.newRadius,queryVideogames:e.newVideogames,queryAfterDate:e.newAfterDate,selectedTournamentID:null,selectedTournamentCoordinates:null,hasSearched:!0,error:e.error})};handleSearchChange=e=>{this.setState({searchAddress:e.newAddress})};handleSelectedTournament=(e,t)=>{console.log(e),e===this.state.selectedTournamentID?(this.setState({selectedTournamentID:null}),this.setState({selectedTournamentCoordinates:null})):(this.setState({selectedTournamentID:e}),r.Z.fromAddress(t).then((e=>{const{lat:t,lng:n}=e.results[0].geometry.location;this.setState({selectedTournamentCoordinates:[t,n]})})))};componentDidMount(){const e=e=>{const t=e.coords.latitude,n=e.coords.longitude;console.log(e,t,n),r.Z.fromLatLng(t,n).then((e=>{const t=e.results[0];console.log(`reverseGeocode raw: ${JSON.stringify(t)}`);const n=e.results[0].formatted_address;console.log(n),this.setState({geolocationAddress:n,searchAddress:n})}),(e=>{console.error(e)})),console.log(JSON.stringify(this.state))};navigator.geolocation?(console.log("GeoLocation is Available!"),navigator.geolocation.getCurrentPosition(e,(()=>console.log("Geolocation permission has been blocked. If you'd like to use your current location, please click 'Use Current Location'")))):console.log("Geolocation not available")}render(){let e={coordinates:`${this.state.queryCoordinates[0]}, ${this.state.queryCoordinates[1]}`,radius:this.state.queryRadius,videogames:this.state.queryVideogames,afterDate:this.state.queryAfterDate},t=null,n=null;return this.state.error||0===this.state.queryVideogames.length?(t=a.createElement("div",{class:"container-fluid"},a.createElement("p",{style:{margin:"auto"}},"Error. Please try again.")),n=a.createElement("div",{style:{display:"none"}})):this.state.hasSearched?(t=a.createElement(P,{variables:e,onTournamentSelected:this.handleSelectedTournament,selectedTournamentID:this.state.selectedTournamentID,currentPage:this.state.currentPage}),n=a.createElement(E,{searchedCoordinates:this.state.queryCoordinates,tournamentCoordinates:this.state.selectedTournamentCoordinates})):(t=a.createElement("p",null,"Enter your location in the search bar above!"),n=a.createElement("div",{style:{display:"none"}})),a.createElement("div",{className:"container-fluid bodyContainer"},a.createElement(o.default,null,a.createElement("title",null,"My Local Locals (beta)")),a.createElement("main",{className:"pageContainer"},a.createElement(q.Z,null),a.createElement(l.KJ,{googleMapsApiKey:R,libraries:G},a.createElement("div",{className:"searchContainer",style:{margin:this.state.hasSearched?"0 0 1.5rem 0":"auto"}},a.createElement(p,{onSearchSubmit:this.handleSearchSubmit,onSearchChange:this.handleSearchChange,variables:e,searchAddress:this.state.searchAddress,geolocationAddress:this.state.geolocationAddress})),a.createElement("div",{className:"contentContainer",style:{display:this.state.hasSearched?"flex":"none"}},a.createElement("div",{className:"resultsContainer"},t),n))))}}var O=Z},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7197)}])},9349:function(e){e.exports={mapContainer:"map_mapContainer__JAJB8"}},1678:function(e){e.exports={autocomplete:"searchbar_autocomplete__Dp5W6",searchbar:"searchbar_searchbar__Vfx_3",filters:"searchbar_filters__QF_xZ",gameFilters:"searchbar_gameFilters__iFIkA"}},6926:function(e){e.exports={eventWrapper:"tournamentEvents_eventWrapper__ySp3O",eventDesc:"tournamentEvents_eventDesc__ojCC_",eventImg:"tournamentEvents_eventImg__0SJ1B"}},4654:function(e){e.exports={listContainer:"tournamentList_listContainer__ytoGC"}},3060:function(e){e.exports={listItemContainer:"tournamentListItem_listItemContainer__gY8vM",overlay:"tournamentListItem_overlay__P8Oyh",tournamentWrapper:"tournamentListItem_tournamentWrapper__vXwb_",itemIndex:"tournamentListItem_itemIndex__IccQ3",tournamentDescription:"tournamentListItem_tournamentDescription__2pTbk",smashGG:"tournamentListItem_smashGG__pMPQF",eventListWrapper:"tournamentListItem_eventListWrapper__zmxZF"}}},function(e){e.O(0,[774,255,791,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);